# 记账软件产品需求文档

## 1. 产品概述

### 1.1 产品定位
一款面向个人用户的智能记账应用，帮助用户轻松管理日常收支、资产配置，并通过数据可视化提供财务洞察。

### 1.2 目标用户
- **主要用户群体：** 25-45岁有理财需求的都市白领
- **次要用户群体：** 大学生、家庭主妇、自由职业者
- **用户特征：** 有一定理财意识，习惯使用移动应用，注重数据安全和隐私保护

### 1.3 核心价值主张
- **简单易用：** 3步完成记账，操作简单直观
- **智能分类：** 自动识别交易类型，减少手动分类
- **资产全景：** 统一管理所有账户资产，实时掌握财务状况
- **数据洞察：** 通过图表分析消费习惯，助力理性消费

## 2. 功能需求

### 2.1 记账功能模块

#### 2.1.1 主页设计
**功能描述：**
应用的主页面，提供财务概览和工具入口。

**具体功能：**
- 显示当前年月收支概览（收入、支出、结余）
- 提供工具导航入口
- 支持年月切换查看历史数据

**界面元素：**
- 顶部：概览卡片（年月显示 + 收支统计）
- 中部：工具栏（账单、我的小家、预算管理、资产管家、图表）
- 底部：底部导航栏（主页、记账、我的小家、图表、我的）

#### 2.1.2 概览卡片设计
**功能描述：**
主页顶部的财务概览卡片，支持年月切换。

**卡片内容：**
- **左侧：** 年月显示（年在上，月在下，月字体稍大）
- **右侧：** 收入、支出、结余金额
- **交互：** 点击年月可切换选择

**年月切换：**
- **年份选择：** 点击年份弹出年份选择器
- **月份选择：** 点击月份弹出月份选择器
- **快速切换：** 支持左右滑动快速切换月份

#### 2.1.3 工具栏设计
**功能描述：**
主页中部的工具导航区域，提供各功能模块入口。

**工具项目：**
- **账单：** 月账单和年账单入口
- **我的小家：** 家庭成员管理入口
- **预算管理：** 预算配置和管理入口
- **资产管家：** 资产管理和图表入口
- **图表：** 数据统计和分析入口

**布局设计：**
- **网格布局：** 5列网格布局
- **图标设计：** 每个工具使用字体图标
- **文字说明：** 图标下方显示工具名称
- **点击交互：** 点击进入全屏功能页面（类似小程序）

#### 2.1.4 工具页面设计
**功能描述：**
工具页面采用类似小程序的界面设计，提供沉浸式体验。

**页面特性：**
- **全屏显示：** 不显示底部导航栏
- **顶部导航：** 页面标题 + 退出按钮（右上角）
- **沉浸式体验：** 类似独立小程序的界面
- **退出功能：** 点击右上角退出按钮返回主页

**退出按钮设计：**
- **位置：** 右上角
- **样式：** 点状图标或关闭图标
- **功能：** 点击退出当前工具页面
- **交互：** 退出时返回主页

#### 2.1.5 交易列表设计
**功能描述：**
展示当月所有交易记录，按天分组显示，支持月份切换。

**列表结构：**
- **按天分组：** 每天的交易记录分组显示
- **日期标题：** 显示日期和当天收支总额
- **交易记录：** 每条记录显示分类icon、标题、成员头像、时间、数值
- **月份切换：** 支持左右滑动切换月份

**交易记录项：**
- **分类icon：** 显示交易分类图标
- **标题：** 用户填写时的标题（第一行）
- **成员头像：** 显示交易贡献人头像（第二行）
- **时间显示：** 右侧显示具体时间（小时:分钟）
- **数值显示：** 右侧显示金额，收入绿色，支出红色
- **两行布局：** 标题和成员头像分两行显示

**交互功能：**
- **点击查看：** 点击交易记录查看详情
- **滑动切换：** 左右滑动切换月份
- **下拉刷新：** 下拉刷新当前月份数据
- **搜索功能：** 支持按分类、成员、金额搜索

#### 2.1.6 年度活跃度小工具
**功能描述：**
类似GitHub活跃度的年度支出热力图，直观展示全年支出情况。

**设计理念：**
- **热力图展示：** 365个小格子代表一年中的每一天
- **颜色深浅：** 根据当天支出金额显示不同深浅的颜色
- **支出分级：** 0-50元（浅色）、50-200元（中色）、200-500元（深色）、500元以上（最深色）

**功能特性：**
- **年度概览：** 显示全年支出趋势和规律
- **月份标识：** 在热力图上标识月份分界线
- **点击查看：** 点击格子查看当天详细支出
- **统计信息：** 显示年度总支出、平均日支出等统计

**交互功能：**
- **缩放查看：** 支持缩放查看详细日期
- **筛选功能：** 可按分类筛选显示
- **分享功能：** 支持分享年度支出报告
- **导出功能：** 支持导出年度支出数据

**数据展示：**
- **支出金额：** 显示每天的总支出金额
- **分类统计：** 显示当天各分类支出占比
- **成员统计：** 显示当天各成员支出情况
- **趋势分析：** 显示支出趋势和规律

#### 2.1.7 底部导航栏设计
**功能描述：**
应用底部的导航栏，包含主页、记账、我的小家、图表、我的五个tab。

**导航结构：**
- **主页：** 财务概览和工具入口
- **记账：** 快速记账功能（居中，突出显示）
- **我的小家：** 家庭成员管理入口
- **图表：** 数据统计和分析入口
- **我的：** 个人设置和功能入口

**记账按钮设计：**
- **位置：** 底部导航栏正中间
- **样式：** 圆形设计，主色调背景，加号图标
- **功能：** 点击弹出记账页面（模态弹窗）
- **突出显示：** 比其他tab按钮更大更突出

**交互特性：**
- **全局可用：** 在任何页面都可以点击记账
- **模态弹窗：** 记账页面从底部弹出
- **快速返回：** 记账完成后返回原页面

#### 2.1.8 记账流程
**功能描述：**
用户点击记账按钮后弹出的记账界面，支持收入/支出记录。

**具体功能：**
- 收入/支出类型切换
- 分类选择（网格布局）
- 计算器式金额输入（支持加减运算）
- 贡献人选择（多选成员）
- 金额分摊设置（默认平分，支持自定义）
- 预算选择（支出时可选择消耗的预算）
- 备注信息输入
- 日期选择（默认今天）
- 账户选择（多账户用户）

**界面元素：**
- 顶部：类型切换按钮（收入/支出）
- 中部：分类选择网格
- 中部：贡献人选择区域（多选列表）
- 中部：金额分摊设置区域（分摊预览）
- 中部：预算选择区域（支出时显示）
- 底部：备注输入框 + 日期选择器（放在计算器上方）
- 底部：计算器式金额输入区域
- 底部：确认按钮

#### 2.1.9 计算器输入法设计
**功能描述：**
类似iOS计算器的金额输入界面，支持加减运算，提供流畅的数字输入体验。

**具体功能：**
- **数字输入：** 0-9数字按钮，支持小数点
- **运算功能：** 支持加号（+）、减号（-）运算
- **清除功能：** 支持清除当前输入（C）、清除所有（AC）
- **实时计算：** 输入过程中实时显示计算结果
- **格式化显示：** 金额自动格式化为货币格式（如：¥1,234.56）

**界面布局：**
- **显示区域：** 顶部大字体显示当前输入和计算结果
- **数字区域：** 3x4网格布局数字按钮（0-9、小数点）
- **功能区域：** 运算按钮（+、-）、清除按钮（C、AC）、确认按钮
- **特殊功能：** 支持长按清除按钮快速清除所有

**交互设计：**
- **触觉反馈：** 每个按钮点击提供iOS原生触觉反馈
- **视觉反馈：** 按钮按下时提供视觉反馈
- **声音反馈：** 可选的计算器按键音效
- **手势支持：** 支持滑动清除、长按快速输入

**计算逻辑：**
- **输入模式：** 支持连续输入数字
- **运算模式：** 点击运算符后进入运算模式
- **结果模式：** 运算完成后显示最终结果
- **错误处理：** 无效运算时显示错误提示

#### 2.1.10 字体图标设计规范
**设计原则：**
- **无图片资源：** 所有图标使用字体图标，不依赖任何图片资源
- **统一风格：** 使用Ionicons或FontAwesome字体图标库
- **可扩展性：** 支持动态颜色和大小调整
- **性能优化：** 字体图标加载速度快，内存占用小

**图标使用规范：**
- **分类图标：** 使用语义化的图标表示不同分类
  - 餐饮：🍽️ 或 restaurant 图标
  - 交通：🚗 或 car 图标
  - 购物：🛒 或 shopping-cart 图标
  - 娱乐：🎮 或 game-controller 图标
  - 医疗：🏥 或 medical 图标
  - 教育：📚 或 school 图标
  - 住房：🏠 或 home 图标
- **功能图标：** 使用标准的功能图标
  - 添加：plus 图标
  - 编辑：edit 图标
  - 删除：trash 图标
  - 设置：settings 图标
  - 统计：bar-chart 图标
  - 账户：wallet 图标

**图标设计要求：**
- **颜色适配：** 图标颜色跟随主题配色方案
- **大小规范：** 统一图标大小，支持动态缩放
- **交互反馈：** 图标点击时提供视觉反馈
- **无障碍支持：** 为图标提供语义化描述

#### 2.1.11 分类管理
**功能描述：**
预设常用分类，支持自定义分类，提供分类统计功能。

**预设分类：**
- **支出分类：** 餐饮、交通、购物、娱乐、医疗、教育、住房、其他
- **收入分类：** 工资、奖金、投资、兼职、其他

**具体功能：**
- 分类图标和颜色显示
- 分类使用频率统计
- 支持自定义分类添加
- 分类编辑和删除

### 2.2 账单功能模块

#### 2.2.1 月账单页面
**功能描述：**
展示指定年份12个月的收支情况，支持年份选择。

**页面结构：**
- **顶部：** 年份选择器 + 概览卡片
- **中部：** 12个月账单列表
- **底部：** 底部导航栏（月账单、年账单）

**概览卡片：**
- **本年结余：** 显示选定年份的总结余
- **年收入：** 显示选定年份的总收入
- **年支出：** 显示选定年份的总支出

**月份列表：**
- **列表布局：** 垂直列表，每个月份一行
- **月份信息：** 月份名称 + 收入 + 支出 + 结余
- **颜色标识：** 收入绿色，支出红色，结余主色调
- **点击交互：** 点击月份查看详细交易记录

#### 2.2.2 年账单页面
**功能描述：**
展示所有年份的收支情况，按年份排序。

**页面结构：**
- **顶部：** 概览卡片
- **中部：** 年份账单列表
- **底部：** 底部导航栏（月账单、年账单）

**概览卡片：**
- **总支出：** 显示所有年份的总支出
- **总收入：** 显示所有年份的总收入
- **总结余：** 显示所有年份的总结余

**年份列表：**
- **列表布局：** 垂直列表，每个年份一行
- **年份信息：** 年份 + 收入 + 支出 + 结余
- **颜色标识：** 收入绿色，支出红色，结余主色调
- **点击交互：** 点击年份查看该年详细账单

### 2.3 资产管家功能模块

#### 2.3.1 资产管家页面设计
**功能描述：**
资产管家页面，包含资产和图表两个tab，tab放在底部。

**页面结构：**
- **顶部：** 资产概览卡片
- **中部：** 内容区域
- **底部：** Tab切换（资产、图表）

**资产概览卡片：**
- **净资产：** 显示总资产减去总负债
- **资产：** 显示所有账户总资产
- **负债：** 显示所有负债（包括零花钱负债）

#### 2.3.2 资产Tab
**功能描述：**
展示所有账户资产信息。

**具体功能：**
- 显示所有账户总资产
- 资产分布饼图展示
- 账户列表（按余额排序）
- 添加新账户入口
- 零花钱负债显示开关

**界面元素：**
- 零花钱负债开关（显示/隐藏）
- 资产分布饼图
- 账户列表 + 添加账户按钮
- 零花钱负债列表（开关打开时显示）

#### 2.3.3 资产图表Tab
**功能描述：**
展示资产每月变更的图表分析。

**图表内容：**
- **资产变化趋势图：** 显示每月资产变化情况
- **收入支出对比图：** 每月收入支出对比
- **账户余额分布图：** 各账户余额占比
- **资产增长分析图：** 资产增长趋势分析

**交互功能：**
- **时间范围选择：** 支持月/季/年时间范围
- **图表类型切换：** 支持不同图表类型
- **数据筛选功能：** 按账户、分类筛选
- **图表导出功能：** 支持图表导出分享

#### 2.3.4 独立图表功能
**功能描述：**
独立的图表工具，提供周/月/年账单分析。

**功能特性：**
- **时间范围：** 支持周/月/年切换
- **账单类型：** 支持收入账单/支出账单切换
- **图表展示：** 折线图显示趋势
- **排行榜：** 分类排行榜展示

**页面结构：**
- **顶部：** 时间范围选择器 + 账单类型切换
- **中部：** 折线图展示区域
- **底部：** 排行榜展示区域

**折线图功能：**
- **趋势展示：** 显示选定时间范围的收支趋势
- **数据点：** 点击数据点查看详细数据
- **缩放功能：** 支持图表缩放查看
- **导出功能：** 支持图表导出

**排行榜功能：**
- **分类排行：** 按分类显示收支排行
- **成员排行：** 按成员显示收支排行
- **金额排行：** 按金额大小排行
- **趋势排行：** 按增长趋势排行

#### 2.3.5 零花钱负债功能
**功能描述：**
统一管理所有账户资产，提供资产分布和变化趋势分析，支持零花钱负债显示。

**具体功能：**
- 显示所有账户总资产
- 资产分布饼图展示
- 账户列表（按余额排序）
- 资产变化趋势图表
- 添加新账户入口
- 零花钱负债显示开关
- 零花钱负债统计

**界面元素：**
- 顶部：资产总览卡片
- 中部：零花钱负债开关（显示/隐藏）
- 中部：资产分布饼图
- 底部：账户列表 + 添加账户按钮
- 底部：零花钱负债列表（开关打开时显示）

**零花钱负债功能：**
- **开关控制：** 可切换是否显示零花钱负债
- **负债计算：** 将家庭成员零花钱显示为负债
- **负债明细：** 显示每个成员的零花钱负债
- **总负债：** 显示所有成员零花钱负债总额
- **净资产：** 显示扣除零花钱负债后的净资产

#### 2.3.6 账户管理
**功能描述：**
支持多种账户类型，提供账户添加、编辑、删除功能。

**账户类型：**
- 现金账户
- 银行卡（支持主流银行）
- 信用卡
- 投资账户
- 其他账户

**具体功能：**
- 账户类型选择
- 银行选择（银行卡类型）
- 账户信息填写
- 初始余额设置
- 账户图标选择

#### 2.3.7 资产详情
**功能描述：**
单个账户的详细信息页面，包含账户信息、交易记录、余额调整等功能。

**具体功能：**
- 账户基本信息展示
- 账户交易记录列表
- 余额调整功能
- 账户设置选项
- 账户删除功能

**界面元素：**
- 顶部：账户信息卡片
- 中部：交易记录列表
- 底部：操作按钮（调整余额、设置、删除）

### 2.4 家庭成员管理模块

#### 2.4.1 我的小家页面设计
**功能描述：**
我的小家页面，展示生活费余额和每天生活费收入。

**页面内容：**
- **生活费余额：** 显示当前生活费总余额
- **每天生活费收入：** 显示每日生活费收入金额
- **成员列表：** 显示所有家庭成员
- **添加成员：** 添加新成员入口

**界面元素：**
- 顶部：生活费概览卡片
- 中部：成员列表
- 底部：添加成员按钮

#### 2.4.2 家庭成员管理
**功能描述：**
支持多家庭成员管理，每个成员有独立的零花钱配置和奖励机制。

**具体功能：**
- **成员管理：** 添加、编辑、删除家庭成员
- **成员信息：** 姓名、头像、角色、创建时间
- **成员状态：** 活跃/非活跃状态管理
- **成员权限：** 可设置成员查看和编辑权限

**界面元素：**
- 成员列表页面（头像+姓名+状态）
- 添加成员按钮（浮动按钮）
- 成员详情页面（信息编辑）
- 成员设置页面（权限配置）

#### 2.4.3 新增成员流程
**功能描述：**
完整的成员添加流程，包含信息填写和配置设置。

**流程步骤：**
1. **基本信息：** 姓名、头像、角色选择
2. **零花钱配置：** 日零花钱金额、开始时间、累计规则
3. **权限设置：** 查看权限、编辑权限
4. **确认创建：** 预览信息并确认创建

**界面设计：**
- **步骤指示器：** 显示当前步骤进度
- **表单验证：** 实时验证输入信息
- **预览功能：** 最后一步预览所有信息
- **快速创建：** 支持跳过部分配置快速创建

#### 2.4.4 零花钱机制
**功能描述：**
为每个家庭成员配置零花钱，支持按天释放、奖励和罚款机制。

**零花钱配置：**
- **日零花钱：** 每个成员可设置每日零花钱金额
- **释放机制：** 按天自动释放零花钱到成员账户
- **累计规则：** 可选择零花钱是否累计到下一期
- **奖励机制：** 支持额外奖励，不影响日常零花钱
- **罚款机制：** 支持罚款扣除，影响零花钱余额
- **开始时间：** 可编辑零花钱开始时间，按实际时间计算

**零花钱管理：**
- **余额查看：** 实时显示每个成员的零花钱余额
- **消费记录：** 查看零花钱消费明细
- **奖励记录：** 查看奖励发放记录
- **罚款记录：** 查看罚款扣除记录
- **统计报表：** 零花钱使用情况统计

#### 2.4.5 成员主页
**功能描述：**
每个成员有独立的个人主页，显示所有相关记录和操作入口。

**主页内容：**
- **成员信息卡片：** 成员头像、成员名字、生活费概览数据放在一个卡片上
- **记录列表：** 支出、奖励、罚款等所有记录
- **快速操作：** 新增支出、奖励、罚款按钮
- **编辑入口：** 支持编辑成员信息

**记录类型：**
- **支出记录：** 零花钱消费记录
- **奖励记录：** 额外奖励发放记录
- **罚款记录：** 罚款扣除记录
- **日常发放：** 每日零花钱发放记录

**操作功能：**
- **新增支出：** 直接为成员添加支出记录
- **发放奖励：** 为成员发放额外奖励
- **扣除罚款：** 为成员扣除罚款
- **编辑信息：** 修改成员基本信息
- **调整配置：** 修改零花钱配置

#### 2.4.6 贡献人功能
**功能描述：**
记账时支持记录收入/支出贡献人，支持多人分摊和自定义金额。

**收入贡献人：**
- **多人收入：** 支持记录多个收入贡献人
- **金额分配：** 默认平分，支持自定义每人金额
- **零花钱影响：** 收入不增加零花钱余额
- **贡献记录：** 记录每个贡献人的收入明细

**支出贡献人：**
- **多人支出：** 支持记录多个支出贡献人
- **金额分摊：** 默认平分，支持自定义每人分摊金额
- **零花钱扣减：** 支出时扣减对应成员的零花钱
- **分摊记录：** 记录每个贡献人的支出明细

**界面设计：**
- **贡献人选择：** 多选成员列表
- **金额分配：** 金额输入和分配界面
- **分摊预览：** 显示分摊结果预览
- **历史记录：** 查看历史分摊记录

### 2.5 预算管理模块

#### 2.5.1 预算配置
**功能描述：**
支持多种预算类型，灵活配置预算规则和累计机制。

**预算类型：**
- **日预算：** 每日支出预算限制
- **周预算：** 每周支出预算限制
- **月预算：** 每月支出预算限制
- **年预算：** 每年支出预算限制
- **分类预算：** 按支出分类设置预算

**预算配置：**
- **预算金额：** 设置预算总金额
- **预算周期：** 设置预算重置周期
- **累计规则：** 可选择未用完预算是否累计到下期
- **预警设置：** 设置预算使用预警阈值
- **通知设置：** 预算超支或接近超支时通知

#### 2.5.2 预算使用
**功能描述：**
记账时可选择消耗哪个预算，支持预算余额查看和调整。

**预算选择：**
- **记账时选择：** 记账界面可选择消耗的预算
- **预算余额：** 实时显示各预算剩余金额
- **预算优先级：** 设置预算使用优先级
- **自动分配：** 支持自动按优先级分配预算

**预算管理：**
- **预算调整：** 可随时调整预算金额
- **预算暂停：** 可暂停特定预算使用
- **预算转移：** 支持预算金额在不同预算间转移
- **预算统计：** 查看各预算使用情况统计

#### 2.5.3 预算统计
**功能描述：**
提供详细的预算使用统计和分析功能。

**统计维度：**
- **时间维度：** 按日、周、月、年统计预算使用
- **成员维度：** 按家庭成员统计预算使用
- **分类维度：** 按支出分类统计预算使用
- **预算维度：** 按预算类型统计使用情况

**分析功能：**
- **使用趋势：** 预算使用趋势分析
- **超支分析：** 预算超支原因分析
- **节省分析：** 预算节省情况分析
- **建议优化：** 基于历史数据提供预算优化建议

### 2.6 数据统计功能模块

#### 2.6.1 收支统计
**功能描述：**
提供详细的收支统计分析，帮助用户了解消费习惯。

**具体功能：**
- 月度收支统计图表
- 分类支出分析
- 收支趋势分析
- 预算执行情况
- 数据导出功能

**统计维度：**
- 时间维度：日、周、月、年
- 分类维度：按支出分类统计
- 账户维度：按账户统计
- 成员维度：按家庭成员统计
- 预算维度：按预算类型统计
- 趋势维度：收支变化趋势

#### 2.6.2 成员统计
**功能描述：**
按家庭成员维度提供详细的统计和分析功能。

**统计内容：**
- **成员收支统计：** 每个成员的收支情况
- **零花钱统计：** 各成员零花钱使用情况
- **奖励统计：** 各成员奖励发放情况
- **罚款统计：** 各成员罚款扣除情况
- **贡献统计：** 各成员的贡献和分摊情况
- **消费习惯分析：** 各成员的消费偏好分析

**分析功能：**
- **成员对比：** 不同成员间的收支对比
- **奖励分析：** 各成员的奖励发放分析
- **罚款分析：** 各成员的罚款扣除分析
- **贡献分析：** 各成员的贡献比例分析
- **消费趋势：** 各成员的消费趋势分析
- **优化建议：** 基于成员数据提供优化建议

#### 2.6.3 预算统计
**功能描述：**
提供详细的预算使用统计和分析功能。

**统计内容：**
- **预算使用率：** 各预算的使用率统计
- **超支分析：** 预算超支情况分析
- **节省分析：** 预算节省情况分析
- **趋势分析：** 预算使用趋势分析

**分析功能：**
- **预算对比：** 不同预算间的使用对比
- **效率分析：** 预算使用效率分析
- **预警分析：** 预算预警情况分析
- **优化建议：** 基于预算数据提供优化建议

## 3. 用户流程设计

### 3.1 新用户引导流程
1. **应用启动** → 欢迎页面
2. **功能介绍** → 功能亮点展示（3-4页）
3. **权限申请** → 通知权限、存储权限
4. **初始设置** → 添加第一个账户
5. **完成引导** → 进入记账主页

### 3.2 记账流程
1. **进入记账** → 点击浮动记账按钮
2. **选择类型** → 收入/支出切换
3. **选择分类** → 点击分类图标
4. **选择贡献人** → 多选家庭成员
5. **设置分摊** → 默认平分，可自定义每人金额
6. **选择预算** → 支出时选择消耗的预算（可选）
7. **输入备注和日期** → 在计算器上方输入备注和选择日期
8. **输入金额** → 使用计算器输入总金额
9. **确认分摊** → 预览分摊结果并确认
10. **完成记账** → 保存交易记录

### 3.3 交易列表查看流程
1. **查看交易列表** → 在主页查看当月交易
2. **按天分组** → 交易按天分组显示
3. **查看详情** → 点击交易记录查看详情
4. **切换月份** → 左右滑动切换月份
5. **搜索交易** → 按分类、成员、金额搜索
6. **刷新数据** → 下拉刷新当前月份数据

### 3.4 年度活跃度查看流程
1. **进入年度活跃度** → 从设置页面进入
2. **查看热力图** → 查看全年支出热力图
3. **筛选数据** → 按分类、成员、金额筛选
4. **查看详情** → 点击格子查看当天详细支出
5. **分享报告** → 分享年度支出报告
6. **导出数据** → 导出年度支出数据

### 3.5 资产查看流程
1. **进入资产** → 点击底部导航"资产管家"
2. **查看总览** → 资产总览页面
3. **查看详情** → 点击具体账户
4. **调整余额** → 点击调整余额按钮
5. **确认修改** → 输入新余额并保存

### 3.6 家庭成员管理流程
1. **进入成员管理** → 点击底部导航"我的小家"
2. **查看成员列表** → 显示所有家庭成员
3. **添加新成员** → 点击添加按钮，填写成员信息
4. **编辑成员信息** → 点击成员卡片进入编辑页面
5. **配置零花钱** → 为成员设置日零花钱金额
6. **管理成员状态** → 设置成员活跃状态

### 3.7 零花钱管理流程
1. **查看零花钱** → 进入成员详情页面
2. **查看余额** → 显示当前零花钱余额
3. **查看消费记录** → 查看零花钱消费明细
4. **发放奖励** → 为成员发放额外奖励
5. **扣除罚款** → 为成员扣除罚款
6. **调整配置** → 修改日零花钱金额、累计规则或开始时间

### 3.8 成员主页流程
1. **进入成员主页** → 点击成员卡片
2. **查看成员信息** → 显示成员基本信息和状态
3. **查看零花钱概览** → 显示当前余额和统计信息
4. **查看记录列表** → 浏览所有支出、奖励、罚款记录
5. **快速操作** → 点击新增支出、奖励、罚款按钮
6. **编辑成员** → 点击编辑按钮进入编辑页面

### 3.9 罚款管理流程
1. **进入罚款功能** → 在成员主页点击"新增罚款"
2. **设置罚款金额** → 输入罚款金额
3. **填写罚款原因** → 输入罚款备注信息
4. **确认扣除** → 确认扣除零花钱
5. **查看罚款记录** → 在记录列表中查看罚款明细

### 3.10 预算管理流程
1. **进入预算管理** → 点击设置中的"预算管理"
2. **查看预算列表** → 显示所有预算配置
3. **创建新预算** → 设置预算类型、金额、周期
4. **配置预算规则** → 设置累计规则、预警阈值
5. **使用预算** → 记账时选择消耗的预算
6. **查看预算统计** → 查看预算使用情况分析

### 3.11 贡献人记账流程
1. **开始记账** → 点击浮动记账按钮
2. **选择类型** → 收入/支出切换
3. **选择分类** → 点击分类图标
4. **选择贡献人** → 多选家庭成员
5. **设置分摊** → 默认平分，可自定义每人金额
6. **选择预算** → 支出时选择消耗的预算（可选）
7. **输入备注和日期** → 在计算器上方输入备注和选择日期
8. **输入金额** → 使用计算器输入总金额
9. **确认分摊** → 预览分摊结果并确认
10. **完成记账** → 保存交易记录

## 4. 界面设计要求

### 4.1 设计风格
- **设计语言：** iOS原生风格（Cupertino Design）
- **色彩方案：** 支持多套主题配色，支持深色/浅色模式切换
- **字体：** iOS系统字体（SF Pro Display），支持动态字体大小
- **图标：** 字体图标（Ionicons/FontAwesome），无图片资源依赖
- **交互：** 遵循iOS原生交互规范，流畅的动画效果

### 4.2 布局规范
- **安全区域：** 适配刘海屏、底部手势区域、动态岛
- **间距规范：** 8pt基础间距，16pt、24pt、32pt递增
- **圆角规范：** 卡片12pt，按钮8pt，输入框4pt
- **阴影规范：** iOS原生阴影效果，浮动按钮使用系统阴影
- **导航栏：** iOS原生导航栏样式，支持大标题模式

### 4.3 交互规范
- **点击反馈：** iOS原生触觉反馈（Haptic Feedback）
- **加载状态：** iOS原生加载指示器
- **错误处理：** iOS原生警告弹窗和错误提示
- **空状态：** 引导性空状态页面，使用字体图标
- **手势操作：** 支持iOS原生手势（滑动、长按、3D Touch）

## 4.4 主题配色方案

### 4.4.1 主题设计原则
- **支持深色/浅色模式：** 自动跟随系统设置
- **主题切换：** 用户可手动切换主题
- **无障碍支持：** 确保颜色对比度符合WCAG标准
- **品牌一致性：** 保持品牌色彩在不同主题下的识别度

### 4.4.2 预设主题配色

#### 1. 晨曦紫（Dawn Purple）
**设计理念：** 温暖而优雅的紫色调，象征新的一天的开始
- **主色调：** #8B5CF6（紫色）
- **辅助色：** #F59E0B（橙色收入）、#EF4444（红色支出）
- **背景色：** #FFFFFF（浅色）/ #1F2937（深色）
- **文字色：** #1F2937（浅色）/ #F9FAFB（深色）
- **卡片色：** #F3F4F6（浅色）/ #374151（深色）

#### 2. 海洋蓝（Ocean Blue）
**设计理念：** 清新自然的蓝色调，给人平静和信任感
- **主色调：** #3B82F6（蓝色）
- **辅助色：** #10B981（绿色收入）、#F87171（红色支出）
- **背景色：** #FFFFFF（浅色）/ #0F172A（深色）
- **文字色：** #1E293B（浅色）/ #F1F5F9（深色）
- **卡片色：** #F8FAFC（浅色）/ #1E293B（深色）

#### 3. 森林绿（Forest Green）
**设计理念：** 生机勃勃的绿色调，象征财富和成长
- **主色调：** #059669（绿色）
- **辅助色：** #F59E0B（橙色收入）、#DC2626（红色支出）
- **背景色：** #FFFFFF（浅色）/ #064E3B（深色）
- **文字色：** #065F46（浅色）/ #ECFDF5（深色）
- **卡片色：** #F0FDF4（浅色）/ #065F46（深色）

#### 4. 日落橙（Sunset Orange）
**设计理念：** 温暖活力的橙色调，充满活力和希望
- **主色调：** #EA580C（橙色）
- **辅助色：** #16A34A（绿色收入）、#DC2626（红色支出）
- **背景色：** #FFFFFF（浅色）/ #451A03（深色）
- **文字色：** #9A3412（浅色）/ #FEF3C7（深色）
- **卡片色：** #FFF7ED（浅色）/ #451A03（深色）

#### 5. 极简灰（Minimal Gray）
**设计理念：** 经典简约的灰色调，专注内容本身
- **主色调：** #6B7280（灰色）
- **辅助色：** #10B981（绿色收入）、#EF4444（红色支出）
- **背景色：** #FFFFFF（浅色）/ #111827（深色）
- **文字色：** #374151（浅色）/ #F9FAFB（深色）
- **卡片色：** #F9FAFB（浅色）/ #1F2937（深色）

### 4.4.3 主题切换功能
- **自动切换：** 跟随系统深色/浅色模式
- **手动切换：** 用户可在设置中手动选择主题
- **预览功能：** 主题切换时实时预览效果
- **记忆功能：** 记住用户最后选择的主题

## 5. 数据需求

### 5.1 核心数据模型
```dart
// 用户信息
class User {
  String id;
  String name;
  String avatar;
  DateTime createdAt;
}

// 家庭成员
class FamilyMember {
  String id;
  String name;
  String avatar;
  String role; // parent, child, other
  bool isActive;
  DateTime createdAt;
  DateTime updatedAt;
}

// 零花钱配置
class PocketMoneyConfig {
  String id;
  String memberId;
  double dailyAmount; // 日零花钱
  bool accumulateToNext; // 是否累计到下期
  DateTime startDate; // 开始时间
  DateTime? endDate;
  bool isEnabled; // 是否启用零花钱功能
  DateTime createdAt;
  DateTime updatedAt;
}

// 零花钱记录
class PocketMoneyRecord {
  String id;
  String memberId;
  double amount;
  String type; // daily, reward, expense, penalty
  String? transactionId; // 关联的交易记录
  String note; // 备注信息
  DateTime date;
  DateTime createdAt;
}

// 账户信息
class Account {
  String id;
  String userId;
  String name;
  String type; // cash, bank, credit, investment, other
  String bankName; // 银行名称（银行卡类型）
  double balance;
  String icon;
  String color;
  DateTime createdAt;
  DateTime updatedAt;
}

// 交易记录
class Transaction {
  String id;
  String userId;
  String accountId;
  String categoryId;
  double amount;
  String type; // income, expense
  String note;
  DateTime date;
  String? budgetId; // 关联的预算
  DateTime createdAt;
}

// 交易贡献人
class TransactionContributor {
  String id;
  String transactionId;
  String memberId;
  double amount; // 分摊金额
  String type; // income, expense
  DateTime createdAt;
}

// 分类信息
class Category {
  String id;
  String name;
  String icon;
  String color;
  String type; // income, expense
  int sortOrder;
  bool isDefault;
}

// 预算信息
class Budget {
  String id;
  String name;
  String type; // daily, weekly, monthly, yearly, category
  double amount; // 预算金额
  double usedAmount; // 已使用金额
  String period; // 预算周期
  bool accumulateToNext; // 是否累计到下期
  double warningThreshold; // 预警阈值
  bool isActive; // 是否激活
  String? categoryId; // 分类预算关联的分类
  DateTime startDate;
  DateTime? endDate;
  DateTime createdAt;
  DateTime updatedAt;
}

// 预算使用记录
class BudgetUsage {
  String id;
  String budgetId;
  String transactionId;
  double amount; // 使用金额
  DateTime date;
  DateTime createdAt;
}

// 年度活跃度数据
class AnnualActivity {
  String id;
  String userId;
  int year;
  Map<String, double> dailyExpenses; // 日期 -> 支出金额
  double totalExpense; // 年度总支出
  double averageDailyExpense; // 平均日支出
  double maxDailyExpense; // 最高日支出
  int expenseDays; // 有支出的天数
  DateTime createdAt;
  DateTime updatedAt;
}

// 年度活跃度配置
class AnnualActivityConfig {
  String id;
  String userId;
  List<double> expenseLevels; // 支出等级阈值
  List<Color> levelColors; // 等级对应颜色
  bool showIncome; // 是否显示收入
  bool showMembers; // 是否显示成员
  DateTime createdAt;
  DateTime updatedAt;
}
```

### 5.2 数据统计需求
- **实时统计：** 收支总额、账户余额
- **定期统计：** 日、周、月、年收支统计
- **分类统计：** 各分类支出占比和趋势
- **趋势分析：** 收支变化趋势和预测

## 6. 技术实现要求

### 6.1 开发技术栈
- **框架：** Flutter 3.0+
- **语言：** Dart
- **状态管理：** Provider/Riverpod
- **本地存储：** SQLite (sqflite) / Hive
- **云端同步：** iCloud (iOS) / Google Drive (Android)
- **图表库：** fl_chart
- **字体图标：** flutter_icons / font_awesome_flutter

### 6.2 平台特性支持
- **iOS特性：**
  - iCloud数据同步
  - iOS原生设计语言（Cupertino）
  - 触觉反馈（Haptic Feedback）
  - 动态岛适配
  - 3D Touch支持
- **Android特性：**
  - Material Design 3
  - Google Drive同步
  - Android原生手势

### 6.3 数据存储方案
- **本地存储：** SQLite数据库存储交易记录和账户信息
- **云端同步：** 
  - iOS：使用iCloud CloudKit同步数据
  - Android：使用Google Drive API同步数据
- **数据加密：** 本地敏感数据加密存储
- **备份恢复：** 支持数据导出和导入功能

## 7. 性能要求

### 7.1 响应时间
- **应用启动：** 冷启动 < 3秒，热启动 < 1秒
- **页面切换：** 页面切换动画 < 300ms
- **数据加载：** 列表数据加载 < 1秒
- **图表渲染：** 图表数据渲染 < 2秒

### 7.2 存储要求
- **本地存储：** 支持至少1年的交易数据
- **数据压缩：** 图片和附件数据压缩存储
- **缓存策略：** 智能缓存，优先显示缓存数据

### 7.3 网络要求
- **离线使用：** 核心功能支持离线使用
- **数据同步：** 网络恢复后自动同步数据
- **流量优化：** 数据传输压缩，减少流量消耗

## 8. 安全与隐私

### 8.1 数据安全
- **本地加密：** 敏感数据本地加密存储
- **传输加密：** 数据传输使用HTTPS协议
- **访问控制：** 应用级访问控制，防止数据泄露

### 8.2 隐私保护
- **数据最小化：** 只收集必要的用户数据
- **用户控制：** 用户可控制数据分享和删除
- **透明政策：** 明确的隐私政策和使用条款

## 9. 兼容性要求

### 9.1 系统兼容
- **iOS版本：** 支持iOS 12.0及以上版本
- **Android版本：** 支持Android 8.0及以上版本
- **屏幕适配：** 支持不同屏幕尺寸和分辨率

### 9.2 设备兼容
- **内存要求：** 最低2GB运行内存
- **存储要求：** 最低100MB可用存储空间
- **网络要求：** 支持WiFi和移动网络

## 10. 测试要求

### 10.1 功能测试
- **核心功能：** 记账、分类、账户管理功能完整测试
- **边界测试：** 异常数据、极限值测试
- **兼容测试：** 不同设备和系统版本测试

### 10.2 性能测试
- **启动性能：** 应用启动时间测试
- **内存测试：** 长时间使用内存泄漏测试
- **电池测试：** 电池消耗优化测试

### 10.3 用户体验测试
- **易用性测试：** 用户操作流程测试
- **界面测试：** 界面美观性和一致性测试
- **无障碍测试：** 无障碍功能支持测试

## 11. 发布计划

### 11.1 开发阶段
- **第一阶段（4周）：** 核心记账功能开发
- **第二阶段（3周）：** 资产管家功能开发
- **第三阶段（2周）：** 统计功能开发
- **第四阶段（2周）：** 测试和优化

### 11.2 测试阶段
- **内部测试（1周）：** 开发团队内部测试
- **Beta测试（2周）：** 小范围用户测试
- **正式发布：** 应用商店上架

### 11.3 迭代计划
- **v1.0：** 基础记账功能
- **v1.1：** 资产管家功能
- **v1.2：** 高级统计功能
- **v2.0：** 云端同步功能

## 12. 成功指标

### 12.1 用户指标
- **日活跃用户：** 目标10万DAU
- **用户留存：** 7日留存率 > 60%
- **用户满意度：** App Store评分 > 4.5分

### 12.2 功能指标
- **记账完成率：** 用户记账流程完成率 > 90%
- **功能使用率：** 核心功能使用率 > 70%
- **错误率：** 应用崩溃率 < 0.1%

### 12.3 业务指标
- **用户增长：** 月新增用户 > 5万
- **用户价值：** 用户生命周期价值 > 50元
- **市场表现：** 同类应用排名前10

---

**文档版本：** v1.7  
**创建日期：** 2024年12月  
**更新日期：** 2024年12月  
**负责人：** 产品经理  
**审核人：** 技术负责人、设计负责人

**更新内容：**
- 更新底部导航栏为5个tab（主页、记账、账单、我的小家、图表）
- 更新交易列表设计，支持分类icon、用户填写标题、成员头像、时间数值分两行显示
- 更新记账页面，备注和日期放在计算器上方
- 更新账单页面，月账单年账单切换放在顶部
- 更新资产管家页面，资产和图表tab放在底部
- 更新图表页面为纯图表展示
- 更新资产页面只展示资产概览和账户列表
- 更新生活费列表改为零花钱列表，支持开关控制
- 更新我的小家页面，展示零花钱余额和每天零花钱收入
- 更新成员主页，成员头像名字和零花钱概览数据放在一个卡片上
- 支持编辑成员信息功能
- 完善数据模型，支持零花钱配置和记录
- 更新用户流程，适配新的界面设计
- 完善主题配色方案和技术实现要求
