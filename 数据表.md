# 记账软件数据表

## 1. 用户和家庭成员数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 用户ID | String | 用户唯一标识 | "user_001" |
| 用户名 | String | 用户姓名 | "张三" |
| 头像 | String | 头像URL或图标 | "👨" |
| 创建时间 | DateTime | 账户创建时间 | "2024-01-01" |

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 成员ID | String | 成员唯一标识 | "member_001" |
| 成员姓名 | String | 成员姓名 | "小明" |
| 角色 | String | 成员角色 | "child" |
| 日零花钱 | Double | 每日零花钱金额 | 30.0 |
| 零花钱余额 | Double | 当前零花钱余额 | 450.0 |
| 是否活跃 | Boolean | 成员是否活跃 | true |

## 2. 账户数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 账户ID | String | 账户唯一标识 | "account_001" |
| 账户名称 | String | 账户名称 | "招商银行储蓄卡" |
| 账户类型 | String | 账户类型 | "bank" |
| 银行名称 | String | 银行名称 | "招商银行" |
| 账户余额 | Double | 当前余额 | 8500.0 |
| 账户图标 | String | 账户图标 | "🏦" |
| 账户颜色 | String | 账户主题色 | "#3B82F6" |

**账户类型说明：**
- cash: 现金账户
- bank: 银行卡
- credit: 信用卡
- investment: 投资账户
- other: 其他账户

## 3. 交易记录数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 交易ID | String | 交易唯一标识 | "trans_001" |
| 交易类型 | String | 收入/支出 | "expense" |
| 交易金额 | Double | 交易金额 | 45.0 |
| 交易分类 | String | 交易分类 | "餐饮" |
| 交易备注 | String | 交易备注 | "午餐" |
| 交易日期 | DateTime | 交易日期 | "2024-12-19 14:30" |
| 关联账户 | String | 关联账户ID | "account_001" |
| 关联预算 | String | 关联预算ID | "budget_001" |
| 显示图标 | String | 分类图标 | "🍽️" |
| 显示颜色 | String | 分类颜色 | "#F59E0B" |
| 时间显示 | String | 格式化时间 | "14:30" |
| 金额显示 | String | 格式化金额 | "-¥45" |

**交易类型：**
- income: 收入
- expense: 支出

**主页显示格式：**
- 按天分组显示
- 日期行显示当天收支总和
- 每条记录显示：分类图标、备注、参与人头像、金额、时间

## 4. 交易贡献人数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 贡献人ID | String | 贡献人唯一标识 | "contributor_001" |
| 交易ID | String | 关联交易ID | "trans_001" |
| 成员ID | String | 关联成员ID | "member_001" |
| 分摊金额 | Double | 该成员分摊金额 | 15.0 |
| 分摊类型 | String | 收入/支出分摊 | "expense" |

## 5. 分类数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 分类ID | String | 分类唯一标识 | "category_001" |
| 分类名称 | String | 分类名称 | "餐饮" |
| 分类图标 | String | 分类图标 | "🍽️" |
| 分类颜色 | String | 分类颜色 | "#F59E0B" |
| 分类类型 | String | 收入/支出分类 | "expense" |
| 排序顺序 | Integer | 显示排序 | 1 |
| 是否默认 | Boolean | 是否默认分类 | true |

**预设分类：**
**支出分类：** 餐饮、交通、购物、娱乐、医疗、教育、住房、其他
**收入分类：** 工资、奖金、投资、兼职、其他

## 6. 预算数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 预算ID | String | 预算唯一标识 | "budget_001" |
| 预算名称 | String | 预算名称 | "月预算" |
| 预算类型 | String | 预算类型 | "monthly" |
| 预算金额 | Double | 预算总金额 | 3000.0 |
| 已用金额 | Double | 已使用金额 | 2450.0 |
| 预算周期 | String | 预算周期 | "monthly" |
| 是否累计 | Boolean | 是否累计到下期 | false |
| 预警阈值 | Double | 预警阈值百分比 | 80.0 |
| 是否激活 | Boolean | 预算是否激活 | true |

**预算类型：**
- daily: 日预算
- weekly: 周预算
- monthly: 月预算
- yearly: 年预算
- category: 分类预算

## 7. 零花钱记录数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 记录ID | String | 记录唯一标识 | "pocket_001" |
| 成员ID | String | 关联成员ID | "member_001" |
| 记录金额 | Double | 记录金额 | 30.0 |
| 记录类型 | String | 记录类型 | "daily" |
| 关联交易 | String | 关联交易ID | "trans_001" |
| 备注信息 | String | 备注说明 | "日常零花钱" |
| 记录日期 | DateTime | 记录日期 | "2024-12-19" |

**记录类型：**
- daily: 日常发放
- reward: 奖励
- expense: 消费
- penalty: 罚款

## 8. 月度统计数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 统计ID | String | 统计唯一标识 | "stats_001" |
| 统计年月 | String | 统计年月 | "2024-12" |
| 总收入 | Double | 月度总收入 | 8500.0 |
| 总支出 | Double | 月度总支出 | 3200.0 |
| 总结余 | Double | 月度总结余 | 5300.0 |
| 餐饮支出 | Double | 餐饮分类支出 | 1200.0 |
| 交通支出 | Double | 交通分类支出 | 800.0 |
| 购物支出 | Double | 购物分类支出 | 600.0 |
| 娱乐支出 | Double | 娱乐分类支出 | 400.0 |
| 其他支出 | Double | 其他分类支出 | 200.0 |

## 9. 年度活跃度数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 活跃度ID | String | 活跃度唯一标识 | "activity_001" |
| 统计年份 | Integer | 统计年份 | 2024 |
| 年度总支出 | Double | 年度总支出 | 45680.0 |
| 平均日支出 | Double | 平均日支出 | 125.0 |
| 最高日支出 | Double | 最高日支出 | 500.0 |
| 有支出天数 | Integer | 有支出的天数 | 365 |
| 每日支出 | Map | 每日支出详情 | {"2024-01-01": 150.0} |

## 10. 资产统计数据

| 字段名 | 数据类型 | 说明 | 示例 |
|--------|----------|------|------|
| 统计ID | String | 统计唯一标识 | "asset_001" |
| 统计日期 | DateTime | 统计日期 | "2024-12-19" |
| 总资产 | Double | 所有账户总资产 | 18000.0 |
| 总负债 | Double | 所有负债总额 | 2320.0 |
| 净资产 | Double | 净资产 | 15680.0 |
| 现金资产 | Double | 现金类资产 | 1200.0 |
| 银行资产 | Double | 银行类资产 | 8500.0 |
| 投资资产 | Double | 投资类资产 | 8000.0 |
| 信用卡负债 | Double | 信用卡负债 | 2320.0 |

## 11. 数据关系图

```
用户 (User)
├── 家庭成员 (FamilyMember)
│   ├── 零花钱配置 (PocketMoneyConfig)
│   └── 零花钱记录 (PocketMoneyRecord)
├── 账户 (Account)
├── 交易记录 (Transaction)
│   ├── 交易贡献人 (TransactionContributor)
│   └── 预算使用 (BudgetUsage)
├── 分类 (Category)
├── 预算 (Budget)
├── 月度统计 (MonthlyStats)
├── 年度活跃度 (AnnualActivity)
└── 资产统计 (AssetStats)
```

## 12. 主要功能数据流

### 记账流程数据流：
1. **用户点击记账** → 创建交易记录 (Transaction)
2. **选择分类** → 关联分类 (Category)
3. **选择贡献人** → 创建交易贡献人 (TransactionContributor)
4. **选择预算** → 创建预算使用记录 (BudgetUsage)
5. **保存交易** → 更新相关统计数据

### 零花钱流程数据流：
1. **每日自动发放** → 创建零花钱记录 (PocketMoneyRecord)
2. **成员消费** → 扣减零花钱余额
3. **发放奖励** → 增加零花钱余额
4. **扣除罚款** → 减少零花钱余额

### 统计更新流程：
1. **交易完成后** → 更新月度统计 (MonthlyStats)
2. **每日更新** → 更新年度活跃度 (AnnualActivity)
3. **账户变更** → 更新资产统计 (AssetStats) 