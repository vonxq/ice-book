# 记账界面设计

## 页面概述
用户点击记账按钮后弹出的记账界面，支持收入/支出记录。

## 界面布局

```
┌─────────────────────────────────────┐
│  [收入] [支出]                     │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  🍽️ 餐饮  🚗 交通  🛒 购物        │
│  🎮 娱乐  🏥 医疗  📚 教育        │
│  🏠 住房  📦 其他                 │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  贡献人: 👨‍👩‍👧‍👦 全家            │
│  分摊: 平分                        │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  备注: ________________            │
│  日期: 2024-12-19                 │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  ┌─────────────────────────────┐   │
│  │        ¥0.00               │   │
│  └─────────────────────────────┘   │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐   │
│  │7│ │8│ │9│ │+│ │4│ │5│ │6│   │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘   │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐   │
│  │1│ │2│ │3│ │-│ │0│ │.│ │C│   │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘   │
│  ┌─────────────────────────────┐   │
│  │          确认               │   │
│  └─────────────────────────────┘   │
└─────────────────────────────────────┘
```

## 主要功能

### 1. 类型切换
- **位置：** 页面顶部
- **功能：** 收入/支出切换
- **样式：** 分段控制器设计
- **交互：** 切换时重置分类选择

### 2. 分类选择
- **位置：** 类型切换下方
- **布局：** 网格布局（3列）
- **分类：** 预设常用分类
- **交互：** 点击选择分类，显示详细信息

### 3. 贡献人选择
- **位置：** 分类选择下方
- **功能：** 多选家庭成员
- **显示：** 头像 + 姓名
- **默认：** 全家（所有成员）

### 4. 备注和日期
- **位置：** 贡献人选择下方
- **备注：** 文本输入框
- **日期：** 日期选择器，默认今天
- **布局：** 垂直排列

### 5. 计算器输入
- **位置：** 页面底部（固定）
- **高度：** 300px
- **功能：** iOS风格计算器
- **按钮：** 数字、运算符、清除、确认

## 交互流程

### 1. 记账流程
1. **选择类型** → 收入/支出切换
2. **选择分类** → 点击分类图标
3. **选择贡献人** → 多选家庭成员
4. **设置分摊** → 默认平分，可自定义
5. **输入备注** → 可选备注信息
6. **选择日期** → 默认今天，可修改
7. **输入金额** → 使用计算器输入
8. **确认保存** → 保存交易记录

### 2. 计算器功能
- **数字输入：** 0-9数字按钮
- **运算功能：** 支持加号（+）、减号（-）
- **清除功能：** C（清除当前）、AC（清除所有）
- **实时计算：** 输入过程中实时显示结果
- **格式化显示：** 自动格式化为货币格式

## 设计规范

### 1. 布局规范
- **计算器固定：** 底部300px高度
- **上方可滚动：** 其他内容可滚动
- **安全区域：** 适配刘海屏和底部手势

### 2. 颜色方案
- **收入：** 绿色 (#10B981)
- **支出：** 红色 (#EF4444)
- **主色调：** 紫色 (#8B5CF6)
- **背景：** 浅色/深色模式适配

### 3. 字体规范
- **金额显示：** 24-32px，粗体
- **按钮文字：** 16-18px，常规
- **说明文字：** 14px，浅色

### 4. 间距规范
- **按钮间距：** 8px
- **区域间距：** 16px
- **内容间距：** 12px

## 特殊功能

### 1. 分摊设置
- **默认平分：** 所有成员平均分摊
- **自定义分摊：** 可设置每人具体金额
- **分摊预览：** 实时显示分摊结果
- **验证功能：** 确保分摊总额等于总金额

### 2. 预算选择
- **支出时显示：** 收入时不显示预算选择
- **预算列表：** 显示可用预算
- **预算余额：** 显示各预算剩余金额
- **自动分配：** 支持按优先级自动分配

### 3. 账户选择
- **多账户支持：** 显示所有账户
- **默认账户：** 自动选择默认账户
- **账户余额：** 显示账户当前余额
- **余额更新：** 记账后自动更新余额

## 错误处理

### 1. 输入验证
- **金额验证：** 必须大于0
- **分类验证：** 必须选择分类
- **贡献人验证：** 至少选择一个贡献人
- **分摊验证：** 分摊总额必须等于总金额

### 2. 错误提示
- **实时验证：** 输入时实时验证
- **错误提示：** 清晰的错误信息
- **保存按钮：** 验证通过才可点击
- **加载状态：** 保存时显示加载状态

## 性能优化

### 1. 响应速度
- **快速切换：** 类型切换无延迟
- **流畅动画：** 页面切换动画
- **触觉反馈：** 按钮点击反馈

### 2. 数据缓存
- **分类缓存：** 缓存分类数据
- **成员缓存：** 缓存家庭成员数据
- **预算缓存：** 缓存预算数据 