# 图表分析界面设计

## 页面概述
图表分析页面，提供多维度数据可视化，包括收支趋势、分类统计、资产变化等图表分析功能。

## 界面布局

### 主界面结构
```
┌─────────────────────────────────────┐
│  图表分析                          │
│  [周] [月] [年] [自定义]           │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  📊 收支趋势图                     │
│  ┌─────────────────────────────────┐ │
│  │                                 │ │
│  │        折线图区域               │ │
│  │                                 │ │
│  └─────────────────────────────────┘ │
│  收入: ¥8,500  支出: ¥3,200        │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  🍽️ 支出分类占比                   │
│  ┌─────────────────────────────────┐ │
│  │                                 │ │
│  │        饼图区域                 │ │
│  │                                 │ │
│  └─────────────────────────────────┘ │
│  餐饮 35%  交通 25%  购物 20%      │
└─────────────────────────────────────┘

┌─────────────────────────────────────┐
│  💰 收入分类占比                   │
│  ┌─────────────────────────────────┐ │
│  │                                 │ │
│  │        环形图区域               │ │
│  │                                 │ │
│  └─────────────────────────────────┘ │
│  工资 80%  兼职 15%  其他 5%       │
└─────────────────────────────────────┘
```

## 主要功能

### 1. 时间范围选择器
- **位置：** 页面顶部
- **选项：** 周、月、年、自定义
- **样式：** 分段控制器
- **交互：** 点击切换时间范围，实时更新图表

### 2. 收支趋势图
- **图表类型：** 折线图
- **数据：** 收入曲线（绿色）、支出曲线（红色）
- **功能：** 显示选定时间范围内的收支趋势
- **交互：** 点击数据点查看详细数据

### 3. 支出分类占比
- **图表类型：** 饼图
- **数据：** 各支出分类的金额占比
- **功能：** 直观显示支出结构
- **交互：** 点击扇形查看分类详情

### 4. 收入分类占比
- **图表类型：** 环形图
- **数据：** 各收入分类的金额占比
- **功能：** 显示收入来源分布
- **交互：** 点击环形查看分类详情

### 5. 资产变化图
- **图表类型：** 面积图
- **数据：** 总资产变化趋势
- **功能：** 显示资产增长情况
- **交互：** 滑动查看历史变化

## 图表类型设计

### 1. 折线图（收支趋势）
```
    收入 ────
         │
    支出 ────
         │
    ──────────────────
    1月  2月  3月  4月
```

**设计规范：**
- **收入线：** 绿色 (#10B981)，2px宽度
- **支出线：** 红色 (#EF4444)，2px宽度
- **网格线：** 浅灰色 (#E5E7EB)
- **数据点：** 圆形，6px直径
- **标签：** 12px字体，浅色

### 2. 饼图（支出分类）
```
    ┌─────────────┐
    │    🍽️      │
    │   餐饮      │
    │   35%       │
    └─────────────┘
```

**设计规范：**
- **颜色：** 使用分类主题色
- **标签：** 显示分类名称和百分比
- **图例：** 右侧显示颜色说明
- **动画：** 点击时扇形分离效果

### 3. 环形图（收入分类）
```
    ┌─────────────┐
    │    💰       │
    │   工资      │
    │   80%       │
    └─────────────┘
```

**设计规范：**
- **内圆：** 显示主要分类信息
- **外环：** 各分类占比
- **颜色：** 使用收入分类主题色
- **动画：** 加载时环形展开效果

### 4. 柱状图（月度对比）
```
    ┌─┐
    │ │ 收入
    │ │
    ┌─┐
    │ │ 支出
    │ │
    ──────────
    1月 2月 3月
```

**设计规范：**
- **收入柱：** 绿色渐变
- **支出柱：** 红色渐变
- **间距：** 柱子间距为柱子宽度的50%
- **标签：** 显示具体金额

## 交互功能

### 1. 时间范围切换
- **周视图：** 显示最近7天数据
- **月视图：** 显示最近30天数据
- **年视图：** 显示最近12个月数据
- **自定义：** 选择自定义时间范围

### 2. 图表交互
- **点击数据点：** 显示详细数据弹窗
- **长按图表：** 显示数据标签
- **双指缩放：** 放大缩小图表
- **滑动：** 查看历史数据

### 3. 数据筛选
- **分类筛选：** 选择特定分类查看
- **成员筛选：** 选择特定成员数据
- **账户筛选：** 选择特定账户数据
- **预算筛选：** 按预算分类查看

### 4. 数据导出
- **截图分享：** 生成图表截图
- **数据导出：** 导出CSV格式数据
- **报告生成：** 生成分析报告
- **打印功能：** 支持打印图表

## 数据展示

### 1. 统计卡片
```
┌─────────────────────────────────────┐
│  本月统计                          │
│  收入: ¥8,500  (+12.5%)           │
│  支出: ¥3,200  (-8.3%)            │
│  结余: ¥5,300  (+25.8%)           │
└─────────────────────────────────────┘
```

### 2. 趋势指标
- **上升趋势：** 绿色箭头 ↑
- **下降趋势：** 红色箭头 ↓
- **持平：** 灰色横线 →
- **百分比：** 显示变化幅度

### 3. 分类排行
```
┌─────────────────────────────────────┐
│  支出排行                          │
│  1. 餐饮    ¥1,120  35%           │
│  2. 交通    ¥800    25%           │
│  3. 购物    ¥640    20%           │
│  4. 娱乐    ¥480    15%           │
│  5. 其他    ¥160    5%            │
└─────────────────────────────────────┘
```

## 空状态设计

### 1. 无数据状态
```
┌─────────────────────────────────────┐
│  📊                               │
│  暂无图表数据                      │
│  开始记账后可以查看分析图表        │
└─────────────────────────────────────┘
```

### 2. 加载状态
```
┌─────────────────────────────────────┐
│  ⏳                               │
│  正在加载图表数据...               │
└─────────────────────────────────────┘
```

### 3. 错误状态
```
┌─────────────────────────────────────┐
│  ❌                               │
│  加载失败                          │
│  点击重试                          │
└─────────────────────────────────────┘
```

## 性能优化

### 1. 图表渲染
- **懒加载：** 只渲染可见图表
- **缓存：** 缓存已渲染的图表
- **优化：** 使用Canvas渲染提高性能

### 2. 数据处理
- **分页加载：** 大量数据分页处理
- **数据压缩：** 压缩传输数据
- **本地计算：** 本地计算统计数据

### 3. 内存管理
- **图表销毁：** 页面切换时销毁图表
- **内存清理：** 定期清理缓存数据
- **资源释放：** 及时释放图表资源

## 设计规范

### 1. 颜色方案
- **收入：** 绿色系 (#10B981, #34D399, #6EE7B7)
- **支出：** 红色系 (#EF4444, #F87171, #FCA5A5)
- **中性色：** 灰色系 (#6B7280, #9CA3AF, #D1D5DB)
- **背景：** 浅色/深色模式适配

### 2. 字体规范
- **标题：** 18px，粗体
- **数据：** 16px，粗体
- **标签：** 14px，常规
- **说明：** 12px，浅色

### 3. 间距规范
- **图表间距：** 20px
- **内容间距：** 16px
- **元素间距：** 12px

### 4. 动画规范
- **加载动画：** 0.3秒淡入
- **切换动画：** 0.2秒滑动
- **交互反馈：** 0.1秒缩放 