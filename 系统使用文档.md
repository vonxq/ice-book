# Ice Book 记账应用 - 系统使用文档

## 项目概述

Ice Book 是一个基于 Flutter 开发的跨平台记账应用，支持 iOS、Android 和 Web 平台。应用提供完整的个人财务管理功能，包括收入支出记录、账户管理、数据统计等。

## 功能特性

### 核心功能
- ✅ 收入支出记录管理
- ✅ 多账户支持（现金、银行、信用卡、投资）
- ✅ 分类统计和图表展示
- ✅ 月度收支统计
- ✅ 本地数据存储
- ✅ 响应式UI设计

### 技术特性
- 🎯 Flutter 3.0+ 跨平台开发
- 📊 SQLite 本地数据库
- 🎨 Material Design 3 UI
- 📈 图表可视化
- 🔄 Provider 状态管理

## 环境要求

### 系统要求
- **macOS**: 10.15+ (推荐 macOS 12+)
- **内存**: 8GB+ RAM
- **存储**: 至少 2GB 可用空间

### 开发环境
- **Flutter**: 3.0.0 或更高版本
- **Dart**: 3.0.0 或更高版本
- **Xcode**: 14.0+ (iOS开发)
- **Android Studio**: 2022.1+ (Android开发)

## 安装配置

### 1. 安装 Flutter

#### 方法一：使用 Homebrew (推荐)
```bash
# 安装 Homebrew (如果未安装)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 安装 Flutter
brew install flutter
```

#### 方法二：手动安装
1. 访问 [Flutter 官网](https://flutter.dev/docs/get-started/install/macos)
2. 下载 Flutter SDK
3. 解压到指定目录
4. 添加到 PATH 环境变量

### 2. 验证安装
```bash
flutter doctor
```

确保所有检查项都显示 ✅ 状态。

### 3. 安装开发工具

#### iOS 开发
```bash
# 安装 Xcode
xcode-select --install

# 安装 iOS 模拟器
open -a Simulator
```

#### Android 开发
1. 下载并安装 [Android Studio](https://developer.android.com/studio)
2. 安装 Android SDK
3. 创建 Android 虚拟设备 (AVD)

## 项目运行

### 方法一：使用运行脚本 (推荐)

```bash
# 给脚本执行权限
chmod +x run.sh

# 运行应用
./run.sh
```

脚本会自动：
- 检查 Flutter 环境
- 安装依赖
- 选择运行平台
- 启动应用

### 方法二：手动运行

```bash
# 1. 进入项目目录
cd /path/to/ice-book

# 2. 获取依赖
flutter pub get

# 3. 检查可用设备
flutter devices

# 4. 运行应用
flutter run
```

### 运行平台选择

#### iOS 模拟器
```bash
flutter run -d ios
```

#### Android 模拟器
```bash
flutter run -d android
```

#### Chrome 浏览器
```bash
flutter run -d chrome
```

## 项目结构

```
ice-book/
├── lib/
│   ├── models/           # 数据模型
│   │   ├── transaction.dart
│   │   └── account.dart
│   ├── providers/        # 状态管理
│   │   ├── transaction_provider.dart
│   │   └── account_provider.dart
│   ├── screens/          # 页面
│   │   ├── home_screen.dart
│   │   ├── add_transaction_screen.dart
│   │   ├── statistics_screen.dart
│   │   ├── account_screen.dart
│   │   └── add_account_screen.dart
│   ├── services/         # 服务层
│   │   └── database_service.dart
│   ├── utils/            # 工具类
│   │   ├── constants.dart
│   │   └── helpers.dart
│   └── main.dart         # 应用入口
├── assets/               # 资源文件
│   ├── images/
│   ├── icons/
│   └── fonts/
├── pubspec.yaml          # 项目配置
├── run.sh               # 运行脚本
└── 系统使用文档.md       # 本文档
```

## 功能使用指南

### 1. 记账功能

#### 添加交易记录
1. 点击主页面右下角的 "+" 按钮
2. 选择交易类型（收入/支出）
3. 选择分类（餐饮、交通、购物等）
4. 输入金额
5. 选择日期（默认为今天）
6. 选择账户（可选）
7. 添加备注（可选）
8. 点击"保存"

#### 查看交易记录
- 主页面显示当月所有交易记录
- 使用左右箭头切换月份
- 顶部显示当月收入、支出、结余统计

### 2. 统计功能

#### 收支统计
- 切换到"统计"标签页
- 查看月度收支汇总
- 查看支出分类饼图
- 查看分类详细列表

#### 图表说明
- 饼图显示各分类支出占比
- 列表显示具体金额和百分比
- 支持按月份查看历史数据

### 3. 账户管理

#### 添加账户
1. 切换到"账户"标签页
2. 点击右下角 "+" 按钮
3. 选择账户类型（现金、银行、信用卡、投资）
4. 输入账户名称
5. 设置初始余额
6. 选择账户颜色
7. 点击"保存"

#### 账户类型说明
- **现金**: 日常现金账户
- **银行**: 储蓄卡、借记卡
- **信用卡**: 信用卡账户
- **投资**: 基金、股票等投资账户

## 测试指南

### 单元测试
```bash
# 运行所有测试
flutter test

# 运行特定测试文件
flutter test test/widget_test.dart
```

### 集成测试
```bash
# 运行集成测试
flutter test integration_test/
```

### 手动测试清单

#### 记账功能测试
- [ ] 添加收入记录
- [ ] 添加支出记录
- [ ] 选择不同分类
- [ ] 输入不同金额
- [ ] 选择不同日期
- [ ] 添加备注
- [ ] 选择账户

#### 统计功能测试
- [ ] 查看月度统计
- [ ] 切换月份
- [ ] 查看饼图
- [ ] 查看分类列表

#### 账户功能测试
- [ ] 添加现金账户
- [ ] 添加银行账户
- [ ] 添加信用卡
- [ ] 添加投资账户
- [ ] 删除账户

## 常见问题

### Q1: Flutter 安装失败
**A**: 确保网络连接正常，或使用国内镜像：
```bash
export PUB_HOSTED_URL=https://pub.flutter-io.cn
export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn
```

### Q2: 模拟器无法启动
**A**: 
- iOS: 确保 Xcode 已安装并更新到最新版本
- Android: 确保 Android Studio 和 SDK 配置正确

### Q3: 应用运行缓慢
**A**: 
- 检查设备性能
- 关闭不必要的后台应用
- 使用 Release 模式运行：`flutter run --release`

### Q4: 数据库错误
**A**: 
- 清除应用数据：`flutter clean`
- 重新获取依赖：`flutter pub get`

## 开发指南

### 添加新功能
1. 在 `lib/models/` 中添加数据模型
2. 在 `lib/providers/` 中添加状态管理
3. 在 `lib/screens/` 中添加页面
4. 在 `lib/services/` 中添加服务逻辑

### 代码规范
- 使用 Dart 官方代码规范
- 类名使用 PascalCase
- 变量名使用 camelCase
- 文件名使用 snake_case

### 提交代码
```bash
git add .
git commit -m "feat: 添加新功能"
git push
```

## 技术支持

### 文档资源
- [Flutter 官方文档](https://flutter.dev/docs)
- [Dart 语言文档](https://dart.dev/guides)
- [Provider 状态管理](https://pub.dev/packages/provider)

### 问题反馈
如遇到问题，请：
1. 查看本文档的常见问题部分
2. 检查 Flutter 环境：`flutter doctor`
3. 查看应用日志
4. 提交 Issue 到项目仓库

## 更新日志

### v1.0.0 (2024-01-01)
- ✅ 初始版本发布
- ✅ 基础记账功能
- ✅ 账户管理功能
- ✅ 统计图表功能
- ✅ 本地数据存储

---

**注意**: 本文档会随项目更新而更新，请确保使用最新版本。 