# 资产管家 - iOS资产管理应用设计文档

## 1. 项目概述

### 1.1 项目名称
资产管家 - 智能资产管理应用

### 1.2 项目目标
开发一款iOS原生资产管理应用，帮助用户全面管理个人资产，包括现金、银行卡、投资账户等，提供资产统计、趋势分析等功能。

### 1.3 技术栈
- **开发语言**: Swift 5.0+
- **UI框架**: SwiftUI
- **数据存储**: Core Data + CloudKit
- **最低支持版本**: iOS 15.0+
- **目标设备**: iPhone, iPad

## 2. 功能需求分析

### 2.1 核心功能

#### 2.1.1 资产管理
- **账户管理**: 现金、银行卡、投资账户等
- **资产统计**: 总资产、各账户余额
- **资产详情**: 查看单个账户详细信息
- **余额调整**: 手动调整账户余额

#### 2.1.2 账户类型
- **现金账户**: 现金、钱包
- **银行卡**: 储蓄卡、信用卡
- **投资账户**: 股票、基金、债券
- **其他账户**: 支付宝、微信等

#### 2.1.3 数据统计
- **资产总览**: 总资产、净资产
- **分类统计**: 按账户类型统计
- **趋势分析**: 资产变化趋势
- **图表展示**: 饼图、柱状图、折线图

### 2.2 辅助功能
- **数据同步**: iCloud自动同步
- **数据备份**: 本地和云端备份
- **安全设置**: 密码保护、指纹识别
- **通知提醒**: 资产变动提醒

## 3. 页面设计

### 3.1 主要页面结构

#### 3.1.1 资产管家主页
```
┌─────────────────────────────────┐
│ 状态栏                          │
├─────────────────────────────────┤
│ 导航栏                          │
│ [菜单] 资产管家 [设置]           │
├─────────────────────────────────┤
│ 总资产概览                      │
│ 总资产: ¥125,680               │
│ 净资产: ¥98,420                │
├─────────────────────────────────┤
│ 账户列表                        │
│ ┌─────────────────────────────┐ │
│ │ 现金账户                    │ │
│ │ ¥2,500                     │ │
│ │ [详情]                     │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 招商银行储蓄卡              │ │
│ │ ¥15,680                    │ │
│ │ [详情]                     │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 投资账户                    │ │
│ │ ¥107,500                   │ │
│ │ [详情]                     │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ [+ 添加账户]                   │
└─────────────────────────────────┘
```

#### 3.1.2 添加账户页面
```
┌─────────────────────────────────┐
│ 添加账户                    [×]  │
├─────────────────────────────────┤
│ 账户类型                        │
│ ┌─────────────────────────────┐ │
│ │ 现金账户                    │ │
│ │ 现金、钱包等                │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 银行卡                      │ │
│ │ 储蓄卡、信用卡等            │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 投资账户                    │ │
│ │ 股票、基金等                │ │
│ └─────────────────────────────┘ │
│ ┌─────────────────────────────┐ │
│ │ 其他账户                    │ │
│ │ 支付宝、微信等              │ │
│ └─────────────────────────────┘ │
└─────────────────────────────────┘
```

#### 3.1.3 添加银行卡页面
```
┌─────────────────────────────────┐
│ 添加银行卡                  [×]  │
├─────────────────────────────────┤
│ 银行选择                        │
│ [招商银行 ▼]                   │
├─────────────────────────────────┤
│ 卡类型                          │
│ [储蓄卡] [信用卡]               │
├─────────────────────────────────┤
│ 卡号                            │
│ **** **** **** 1234            │
├─────────────────────────────────┤
│ 初始余额                        │
│ ¥__.__                          │
├─────────────────────────────────┤
│ 备注                            │
│ ________________                │
├─────────────────────────────────┤
│ [取消] [保存]                   │
└─────────────────────────────────┘
```

#### 3.1.4 资产详情页面
```
┌─────────────────────────────────┐
│ 资产详情                    [×]  │
├─────────────────────────────────┤
│ 账户信息                        │
│ 招商银行储蓄卡                  │
│ ¥15,680                        │
├─────────────────────────────────┤
│ 操作选项                        │
│ [调整余额] [设置] [删除]        │
├─────────────────────────────────┤
│ 交易记录                        │
│ • 2024-01-15 收入 +¥5,000      │
│ • 2024-01-14 支出 -¥1,200      │
│ • 2024-01-13 转账 +¥2,000      │
└─────────────────────────────────┘
```

#### 3.1.5 调整余额页面
```
┌─────────────────────────────────┐
│ 调整余额                    [×]  │
├─────────────────────────────────┤
│ 当前余额                        │
│ ¥15,680                        │
├─────────────────────────────────┤
│ 调整类型                        │
│ [增加] [减少] [设置]            │
├─────────────────────────────────┤
│ 调整金额                        │
│ ¥__.__                          │
├─────────────────────────────────┤
│ 调整原因                        │
│ [收入] [支出] [转账] [其他]     │
├─────────────────────────────────┤
│ 备注                            │
│ ________________                │
├─────────────────────────────────┤
│ [取消] [确认]                   │
└─────────────────────────────────┘
```

#### 3.1.6 图表统计页面
```
┌─────────────────────────────────┐
│ 资产统计                    [×]  │
├─────────────────────────────────┤
│ 时间筛选                        │
│ [本月 ▼] [本年] [全部]          │
├─────────────────────────────────┤
│ 资产分布                        │
│ ┌─────────────────────────────┐ │
│ │ 饼图展示                    │ │
│ │ 现金: 2%                    │ │
│ │ 银行卡: 12%                  │ │
│ │ 投资: 86%                    │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ 资产趋势                        │
│ ┌─────────────────────────────┐ │
│ │ 折线图展示                  │ │
│ │ 资产变化趋势                │ │
│ └─────────────────────────────┘ │
├─────────────────────────────────┤
│ 账户排行                        │
│ 1. 投资账户 ¥107,500           │
│ 2. 招商银行 ¥15,680            │
│ 3. 现金账户 ¥2,500             │
└─────────────────────────────────┘
```

## 4. 数据结构设计

### 4.1 Core Data 模型

#### 4.1.1 Account (账户)
```swift
class Account: NSManagedObject {
    @NSManaged var id: UUID
    @NSManaged var name: String
    @NSManaged var type: String // "cash", "bank", "investment", "other"
    @NSManaged var balance: Double
    @NSManaged var currency: String
    @NSManaged var bankName: String?
    @NSManaged var cardNumber: String?
    @NSManaged var cardType: String? // "savings", "credit"
    @NSManaged var icon: String
    @NSManaged var color: String
    @NSManaged var isActive: Bool
    @NSManaged var note: String?
    @NSManaged var createdAt: Date
    @NSManaged var updatedAt: Date
    
    // 关联关系
    @NSManaged var transactions: Set<Transaction>?
}
```

#### 4.1.2 Transaction (交易记录)
```swift
class Transaction: NSManagedObject {
    @NSManaged var id: UUID
    @NSManaged var amount: Double
    @NSManaged var type: String // "income", "expense", "transfer", "adjustment"
    @NSManaged var category: String
    @NSManaged var accountId: UUID
    @NSManaged var targetAccountId: UUID?
    @NSManaged var date: Date
    @NSManaged var note: String?
    @NSManaged var createdAt: Date
    
    // 关联关系
    @NSManaged var account: Account?
    @NSManaged var targetAccount: Account?
}
```

#### 4.1.3 Bank (银行信息)
```swift
class Bank: NSManagedObject {
    @NSManaged var id: UUID
    @NSManaged var name: String
    @NSManaged var code: String
    @NSManaged var logo: String
    @NSManaged var isActive: Bool
}
```

### 4.2 数据关系
```
Account (账户)
├── 一对多 Transaction (交易记录)
└── 关联 Bank (银行信息)

Transaction (交易记录)
├── 多对一 Account (源账户)
└── 多对一 Account (目标账户)

Bank (银行信息)
└── 一对多 Account (账户)
```

## 5. 技术架构设计

### 5.1 项目结构
```
AssetManager/
├── App/
│   ├── AssetManagerApp.swift
│   └── AppDelegate.swift
├── Views/
│   ├── Main/
│   │   ├── HomeView.swift
│   │   ├── AccountListView.swift
│   │   ├── AccountDetailView.swift
│   │   ├── AddAccountView.swift
│   │   ├── StatisticsView.swift
│   │   └── SettingsView.swift
│   ├── Components/
│   │   ├── AccountCard.swift
│   │   ├── BalanceDisplay.swift
│   │   ├── TransactionList.swift
│   │   ├── ChartView.swift
│   │   └── BankPicker.swift
│   └── Modals/
│       ├── AddAccountModal.swift
│       ├── AddBankCardModal.swift
│       ├── AdjustBalanceModal.swift
│       └── AccountSettingsModal.swift
├── Models/
│   ├── CoreData/
│   │   ├── AssetManager.xcdatamodeld
│   │   ├── PersistenceController.swift
│   │   └── CloudKitManager.swift
│   └── ViewModels/
│       ├── HomeViewModel.swift
│       ├── AccountViewModel.swift
│       ├── StatisticsViewModel.swift
│       └── SettingsViewModel.swift
├── Services/
│   ├── AccountService.swift
│   ├── TransactionService.swift
│   ├── BankService.swift
│   ├── CloudKitService.swift
│   └── NotificationService.swift
├── Utils/
│   ├── Constants.swift
│   ├── Extensions.swift
│   ├── Formatters.swift
│   └── Validators.swift
└── Resources/
    ├── Assets.xcassets
    ├── Localizable.strings
    └── Info.plist
```

### 5.2 数据流架构
```
UI Layer (SwiftUI Views)
    ↓
ViewModel Layer (MVVM)
    ↓
Service Layer (Business Logic)
    ↓
Data Layer (Core Data + CloudKit)
```

## 6. UI/UX 设计规范

### 6.1 颜色方案
```swift
// 主色调
let primaryColor = Color("PrimaryColor") // #007AFF
let secondaryColor = Color("SecondaryColor") // #5856D6

// 功能色
let incomeColor = Color("IncomeColor") // #34C759
let expenseColor = Color("ExpenseColor") // #FF3B30
let neutralColor = Color("NeutralColor") // #8E8E93

// 背景色
let backgroundColor = Color("BackgroundColor") // #F2F2F7
let cardBackgroundColor = Color("CardBackgroundColor") // #FFFFFF

// 文字色
let primaryTextColor = Color("PrimaryTextColor") // #000000
let secondaryTextColor = Color("SecondaryTextColor") // #8E8E93
```

### 6.2 字体规范
```swift
// 标题字体
let titleFont = Font.system(size: 28, weight: .bold)
let subtitleFont = Font.system(size: 20, weight: .semibold)

// 正文字体
let bodyFont = Font.system(size: 16, weight: .regular)
let captionFont = Font.system(size: 14, weight: .medium)

// 数字字体
let amountFont = Font.system(size: 24, weight: .bold)
let balanceFont = Font.system(size: 32, weight: .bold)
```

### 6.3 间距规范
```swift
// 标准间距
let spacing: CGFloat = 16
let smallSpacing: CGFloat = 8
let largeSpacing: CGFloat = 24

// 圆角
let cornerRadius: CGFloat = 12
let smallCornerRadius: CGFloat = 8

// 卡片阴影
let cardShadow = Shadow(color: .black.opacity(0.1), radius: 8, x: 0, y: 2)
```

## 7. 开发计划

### 7.1 第一阶段 (MVP)
- [ ] 项目基础架构搭建
- [ ] Core Data 模型设计
- [ ] 主页UI实现
- [ ] 账户列表功能
- [ ] 添加账户功能

### 7.2 第二阶段 (功能完善)
- [ ] 账户详情页面
- [ ] 调整余额功能
- [ ] 交易记录功能
- [ ] 银行信息管理

### 7.3 第三阶段 (高级功能)
- [ ] 统计图表功能
- [ ] CloudKit 同步实现
- [ ] 数据导出功能
- [ ] 安全设置功能

### 7.4 第四阶段 (优化发布)
- [ ] 性能优化
- [ ] 用户体验优化
- [ ] 测试和调试
- [ ] App Store 发布准备

## 8. 风险评估

### 8.1 技术风险
- CloudKit 同步复杂性
- 大量数据性能优化
- 银行信息安全性

### 8.2 解决方案
- 采用成熟的同步策略
- 实现数据分页和缓存
- 本地加密存储敏感信息

## 9. 总结

本设计文档为资产管家应用提供了完整的技术方案，专注于资产管理功能，包括账户管理、余额调整、统计图表等核心功能。项目采用现代化的iOS开发技术栈，确保应用的稳定性、安全性和用户体验。

下一步将开始具体的代码实现，按照开发计划逐步完成各个功能模块。 